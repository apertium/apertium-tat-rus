#!/bin/bash

cd ../../languages/apertium-tat
make &&
cd ../apertium-rus
make &&
cd ../../incubator/apertium-tat-rus
make &&
./wiki-tests.sh Regression tat rus &&
./qa.sh tat-rus-corp &&

echo '[*@#] errors tat-rus before:'
grep -o '[*@#]' corpa/tat-rus-origina.txt | wc -l
echo '[*@#] errors tat-rus after:'
grep -o '[*@#]' corpa/tat-rus-nova.txt | wc -l

echo 'WER tat-rus before:'
perl ../../trunk/apertium-eval-translator/apertium-eval-translator.pl -test corpa/tat-rus-origina.txt -ref corpa/tat-rus-posted.txt > /tmp/tat-rus-wer-origina.txt
grep '(WER)' /tmp/tat-rus-wer-origina.txt
echo 'WER tat-rus after:'
perl ../../trunk/apertium-eval-translator/apertium-eval-translator.pl -test corpa/tat-rus-nova.txt -ref corpa/tat-rus-posted.txt > /tmp/tat-rus-wer-nova.txt
grep '(WER)' /tmp/tat-rus-wer-nova.txt

